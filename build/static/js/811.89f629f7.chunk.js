"use strict";(self.webpackChunkfamily_moments_experience_app=self.webpackChunkfamily_moments_experience_app||[]).push([[811],{14112:function(e,t,n){n.d(t,{$0:function(){return l},Lg:function(){return a},XF:function(){return c},eG:function(){return f},gn:function(){return r},mH:function(){return u}});var r="iOS"===function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Desktop"}(),s=new Date,i=("0"+s.getDate()).slice(-2),o=("0"+(s.getMonth()+1)).slice(-2),a=s.getFullYear()+"-"+o+"-"+i,l=(s.getHours()<10?"0"+s.getHours():s.getHours())+":"+(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":"+s.getSeconds();function c(e){return 9999999,Math.floor(9999999*Math.random())}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return t.setMinutes(t.getMinutes()+e),t}var d=0,p=navigator.userAgent.toLowerCase().indexOf("android")>-1;function h(e){!0!==e&&d++,!p&&d>=2||p&&d>=1?window.history.back():window.history.pushState({},"")}function f(){h(!0),window.addEventListener("popstate",h)}},13739:function(e,t,n){n.d(t,{G:function(){return o},o:function(){return a}});var r=n(16871),s=n(72791),i=n(62130),o=function(){var e=(0,r.s0)();(0,s.useEffect)((function(){(0,i.ej)("session_id")||e("/landing")}),[])},a=function(){var e=(0,r.s0)();(0,s.useEffect)((function(){"true"!==(0,i.ej)("is_admin")&&e("/home")}),[])}},34709:function(e,t,n){n.d(t,{$6:function(){return j},JC:function(){return v},JV:function(){return d},jr:function(){return m},o_:function(){return y}});var r=n(70885),s=n(15861),i=n(87757),o=n.n(i),a=n(78402),l=n(79328),c=n(14112),u=n(48317);function d(e,t,n,r,s,i,o){return p.apply(this,arguments)}function p(){return(p=(0,s.Z)(o().mark((function e(t,n,r,s,i,a,c){var d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={code:t,headings:n,subtitle:r,campaign:s,datetime:i,topic:a,click_url:c},e.next=3,(0,u.QZ)(l.R+"/web-push",d).then((function(e){console.log("Sending Web Push... => ",e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n,r){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)(o().mark((function e(t,n,r,s){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={phone:t,message:n,datetime:r||null,click_url:s},e.next=3,(0,u.QZ)(l.R+"/sms-push",i).then((function(e){console.log("Sending SMS Push... => ",e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)(o().mark((function e(t,n,r){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({app_id:"".concat("569117be-390c-4e5b-b865-f7522b09dcf2"),external_user_id:r,tags:{session_id:n}})},fetch("https://onesignal.com/api/v1/players/"+t,s).then((function(e){return e.json()})).then((function(e){return console.log("Updating player id... => ",e.success)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,(0,u.Pd)(l.R+"/devices").then((function(e){t=e.body.players}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(o().mark((function e(t,n,r){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.QZ)(l.R+"/device",{phone:t,code:n,session_id:r}).then((function(e){return e}));case 2:return s=e.sent,e.abrupt("return",{response:s});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var n="Knock Knock!",s="Default Campaign",i="Default Topic",o=new Date,u=l.x.concat("/"),p="Questions are now available!",f="Have you completed your task? If not do it now!",m=new Date(c.Lg);m.setDate(m.getDate()+1);m.setDate(m.getDate()),c.gn?h(t,"Welcome to Family Moments Experience!",null,l.x):d(e,n,"Welcome to Family Moments Experience!",s,o,i,l.x);(new Date).toLocaleTimeString("en-US",{hour12:!1});for(var g=0;g<7;g++){var y=m.toISOString().split("T"),x=(0,r.Z)(y,1)[0],j=(0,c.mH)(10,new Date(x+"T"+a.Xd.phaseA_time)),_=(0,c.mH)(10,new Date(x+"T"+a.Xd.phaseB_time)),v=(0,c.mH)(10,new Date(x+"T"+a.Xd.phaseC_time));c.gn?(h(t,p,new Date(x+"T"+a.Xd.phaseA_time),u),h(t,f,j,u),h(t,p,new Date(x+"T"+a.Xd.phaseB_time),u),h(t,f,_,u),h(t,p,new Date(x+"T"+a.Xd.phaseC_time),u),h(t,f,v,u)):(d(e,n,p,s,new Date(x+"T"+a.Xd.phaseA_time),i,u),d(e,n,f,s,j,i,u),d(e,n,p,s,new Date(x+"T"+a.Xd.phaseB_time),i,u),d(e,n,f,s,_,i,u),d(e,n,p,s,new Date(x+"T"+a.Xd.phaseC_time),i,u),d(e,n,f,s,v,i,u)),m.setDate(m.getDate()+1)}}},36811:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(70885),s=n(72791),i=n(64988),o=n(79328),a=n(48317),l=n(77813),c=n(24846),u=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M474.444,19.857a20.336,20.336,0,0,0-21.592-2.781L33.737,213.8v38.066l176.037,70.414L322.69,496h38.074l120.3-455.4A20.342,20.342,0,0,0,474.444,19.857ZM337.257,459.693,240.2,310.37,389.553,146.788l-23.631-21.576L215.4,290.069,70.257,232.012,443.7,56.72Z' class='ci-primary'/>"],d=n(14112),p=n(34709),h=n(80184),f=[{key:"id",label:"Player ID",_props:{color:"info"}},{key:"code",_props:{color:"info"}},{key:"session_id",_props:{color:"info"}},{key:"device_model",_props:{color:"info"}},{key:"device_type",_props:{color:"info"}},{key:"language",_props:{color:"info"}},{key:"invalid_identifier",label:"Subscribed",_props:{color:"info"}}],m=function(){var e=(0,s.useState)([]),t=(0,r.Z)(e,2),n=t[0],i=t[1],a=(0,s.useState)(""),m=(0,r.Z)(a,2),g=m[0],y=m[1],x=(0,s.useState)("Knock Knock!"),j=(0,r.Z)(x,2),_=j[0],v=j[1],b=(0,s.useState)("Questions are now available!"),w=(0,r.Z)(b,2),S=w[0],k=w[1],D=(0,s.useState)("Default Campaign"),C=(0,r.Z)(D,2),Z=C[0],P=C[1],H=(0,s.useState)("Default Topic"),L=(0,r.Z)(H,2),M=L[0],T=L[1],F=(0,s.useState)(""),V=(0,r.Z)(F,2),O=(V[0],V[1]),R=(0,s.useState)(d.Lg),A=(0,r.Z)(R,2),X=A[0],E=A[1],Q=(0,s.useState)(d.Lg),I=(0,r.Z)(Q,2),q=(I[0],I[1]),N=(0,s.useState)(d.$0),U=(0,r.Z)(N,2),B=U[0],J=U[1],K=(0,s.useState)(o.x.concat("/#/questions?phase=A")),W=(0,r.Z)(K,2),$=W[0],z=W[1];(0,s.useEffect)((function(){(0,p.o_)().then((function(e){i(e)}))}),[]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.rb,{children:(0,h.jsx)(l.b7,{xs:12,children:(0,h.jsx)(l.lx,{onSubmit:function(e){e.preventDefault(),(0,p.JV)(g,_,S,Z,new Date(X+", "+B),M,$)},children:(0,h.jsxs)(l.xH,{className:"mb-4",children:[(0,h.jsxs)(l.bn,{children:[(0,h.jsx)("strong",{children:"Send Push notifications"})," ",(0,h.jsx)("small",{children:"Devices Table"})]}),(0,h.jsx)(l.sl,{children:(0,h.jsxs)(l.rb,{className:"g-3",children:[(0,h.jsx)(l.uE,{sorterValue:{column:"id",state:"asc"},tableProps:{striped:!0,responsive:!0},items:n,columns:f,columnSorter:!0,itemsPerPage:50,pagination:!0,scopedColumns:{session_id:function(e){return(0,h.jsx)("td",{children:e.tags.session_id})},code:function(e){return(0,h.jsx)("td",{children:e.tags.code})}}}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Session ID"}),(0,h.jsx)(l.jO,{placeholder:"Session ID","aria-label":"Selected Session",onChange:function(e){return y(e.target.value)}})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Campaign Name"}),(0,h.jsx)(l.jO,{placeholder:"My Campaign","aria-label":"Campaign",value:Z,onChange:function(e){return P(e.target.value)}})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Topic"}),(0,h.jsx)(l.jO,{placeholder:"My Topic","aria-label":"Topic",value:M,onChange:function(e){return T(e.target.value)}})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Heading"}),(0,h.jsx)(l.jO,{placeholder:"My Heading","aria-label":"Heading",value:_,onChange:function(e){return v(e.target.value)}})]}),(0,h.jsxs)(l.b7,{md:4,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Subtitle"}),(0,h.jsx)(l.jO,{placeholder:"My Subtitle","aria-label":"Subtitle",value:S,onChange:function(e){return k(e.target.value)}})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Frequency"}),(0,h.jsxs)(l.LX,{id:"inputState",defaultValue:"Once per day",onChange:function(e){return O(e.target.value)},children:[(0,h.jsx)("option",{children:"Once per day"}),(0,h.jsx)("option",{children:"Once per week"}),(0,h.jsx)("option",{children:"Once per month"})]})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Start Date"}),(0,h.jsx)(l.jO,{type:"date",defaultValue:d.Lg,onChange:function(e){return E(e.target.value)},"aria-label":"Date"})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"End Date"}),(0,h.jsx)(l.jO,{type:"date",defaultValue:d.Lg,onChange:function(e){return q(e.target.value)},"aria-label":"Date"})]}),(0,h.jsxs)(l.b7,{md:2,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Delivery Time"}),(0,h.jsx)(l.jO,{type:"time",defaultValue:d.$0,onChange:function(e){return J(e.target.value)},"aria-label":"Time"})]}),(0,h.jsxs)(l.b7,{md:4,children:[(0,h.jsx)(l.L8,{htmlFor:"inputState",children:"Click URL"}),(0,h.jsx)(l.jO,{placeholder:o.x.concat("/#/questions?phase=A"),"aria-label":"URL",value:$,onChange:function(e){return z(e.target.value)}})]})]})}),(0,h.jsx)(l.Bt,{style:{textAlign:"end"},children:(0,h.jsxs)(l.u5,{type:"submit",size:"sm",children:["Send Push ",(0,h.jsx)(c.Z,{icon:u})]})})]})})})})})},g=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"],y=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M24,24V496H318.627L496,318.627V24ZM56,56H464V272H272V464H56ZM305.373,464H304V304H464v1.373Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='208 288 208 208 288 208 288 176 208 176 208 96 176 96 176 176 96 176 96 208 176 208 176 288 208 288' class='ci-primary'/>"],x=function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.rb,{children:(0,h.jsx)(l.b7,{xs:12,children:(0,h.jsxs)(l.xH,{className:"mb-4",children:[(0,h.jsx)(l.bn,{children:(0,h.jsx)("strong",{children:e.table_title})}),(0,h.jsx)(l.sl,{children:(0,h.jsx)(l.uE,{sorterValue:{column:"id",state:"asc"},tableProps:{striped:!0,responsive:!0},clickableRows:!0,items:e.data,columns:e.columns,tableFilter:!0,cleaner:!0,loading:e.loading,itemsPerPageSelect:!0,itemsPerPage:5,columnSorter:!0,pagination:!0,scopedColumns:{}})}),(0,h.jsxs)(l.Bt,{children:[(0,h.jsxs)(l.u5,{style:{display:e.resetData?"block":"none"},size:"sm",color:"danger",className:"float-end",onClick:function(){return(0,a.Sp)(o.R+e.delete_all_url).then((function(){e.resetData()}))},children:["Clear All ",(0,h.jsx)(c.Z,{icon:g})]}),(0,h.jsxs)(l.u5,{style:{display:e.postQuestion?"block":"none"},size:"sm",color:"success",className:"float-end",onClick:function(){return e.postQuestion()},children:["Create Question ",(0,h.jsx)(c.Z,{icon:y})]})]})]})})})})},j=n(13739),_=function(){(0,j.o)();var e=(0,s.useState)(!1),t=(0,r.Z)(e,2),n=t[0],l=t[1],c=(0,s.useState)([]),u=(0,r.Z)(c,2),d=u[0],p=u[1],f=(0,s.useState)([]),g=(0,r.Z)(f,2),y=g[0],_=g[1],v=(0,s.useState)([]),b=(0,r.Z)(v,2),w=b[0],S=b[1],k=(0,s.useState)([]),D=(0,r.Z)(k,2),C=D[0],Z=D[1];(0,s.useEffect)((function(){l(!0),Promise.resolve((0,a.Pd)(o.R+"/sessions").then((function(e){p(e),l(!1)})),(0,a.Pd)(o.R+"/users").then((function(e){_(e),l(!1)})),(0,a.Pd)(o.R+"/roles").then((function(e){S(e),l(!1)})),(0,a.Pd)(o.R+"/questions").then((function(e){Z(e.questions),l(!1)}))),l(!0)}),[]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.S8,{}),(0,h.jsx)(m,{}),(0,h.jsx)(x,{table_title:"Sessions",data:d,columns:[{key:"id",label:"ID",_style:{width:"10%"},_props:{color:"success"}},{key:"code",label:"User Code",_style:{width:"20%"},_props:{color:"success"}},{key:"activated",_style:{width:"10%"},_props:{color:"success"}},{key:"start_date",_style:{width:"20%"},_props:{color:"success"}},{key:"end_date",_style:{width:"20%"},_props:{color:"success"}},{key:"status",_style:{width:"20%"},_props:{color:"success"}}],loading:n}),(0,h.jsx)(x,{table_title:"Users",data:y,columns:[{key:"code",label:"Code",_style:{width:"50%"},_props:{color:"danger"}},{key:"RoleId",_style:{width:"50%"},_props:{color:"danger"}}],loading:n,delete_all_url:"/users/delete-all",resetData:function(){l(!0),Promise.resolve((0,a.Pd)(o.R+"/sessions").then((function(e){p(e),l(!1)})),(0,a.Pd)(o.R+"/users").then((function(e){_(e),l(!1)})),(0,a.Pd)(o.R+"/roles").then((function(e){S(e),l(!1)})),(0,a.Pd)(o.R+"/questions").then((function(e){Z(e.questions),l(!1)})))}}),(0,h.jsx)(x,{table_title:"Roles",data:w,columns:[{key:"id",label:"ID",_style:{width:"50%"},_props:{color:"primary"}},{key:"title",_style:{width:"50%"},_props:{color:"primary"}}],loading:n}),(0,h.jsx)(x,{table_title:"Questions",data:C,columns:[{key:"id",label:"ID",_style:{width:"10%"},_props:{color:"warning"}},{key:"title",_style:{width:"20%"},_props:{color:"warning"}},{key:"options",_style:{width:"50%"},_props:{color:"warning"}},{key:"correct_option",_style:{width:"20%"},_props:{color:"warning"}}],loading:n,postQuestion:function(){}})]})}}}]);
//# sourceMappingURL=811.89f629f7.chunk.js.map