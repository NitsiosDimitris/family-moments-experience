"use strict";(self.webpackChunkfamily_moments_experience_app=self.webpackChunkfamily_moments_experience_app||[]).push([[46],{14112:function(e,n,t){t.d(n,{$0:function(){return a},Lg:function(){return c},XF:function(){return u},eG:function(){return h},gn:function(){return r},mH:function(){return l}});var r="iOS"===function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Desktop"}(),i=new Date,s=("0"+i.getDate()).slice(-2),o=("0"+(i.getMonth()+1)).slice(-2),c=i.getFullYear()+"-"+o+"-"+s,a=(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())+":"+i.getSeconds();function u(e){return 9999999,Math.floor(9999999*Math.random())}function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return n.setMinutes(n.getMinutes()+e),n}var d=0,p=navigator.userAgent.toLowerCase().indexOf("android")>-1;function f(e){!0!==e&&d++,!p&&d>=2||p&&d>=1?window.history.back():window.history.pushState({},"")}function h(){f(!0),window.addEventListener("popstate",f)}},27275:function(e,n,t){t.d(n,{Jl:function(){return u},RQ:function(){return x},U6:function(){return f},nW:function(){return j},oe:function(){return d},wm:function(){return m}});var r=t(28683),i=t(15861),s=t(87757),o=t.n(s),c=t(79328),a=t(48317);function u(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting session..."),e.next=3,(0,a.Pd)(c.R+"/session/user/"+n).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",(0,r.Z)({},t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting user..."),e.next=3,(0,a.Pd)(c.R+"/user/"+n).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",(0,r.Z)({},t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting role..."),e.next=3,(0,a.Pd)(c.R+"/role/"+n).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",(0,r.Z)({},t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,n,t,r,i,s){return g.apply(this,arguments)}function g(){return(g=(0,i.Z)(o().mark((function e(n,t,r,i,s,u){var l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting user answers..."),e.next=3,(0,a.Pd)(c.R+"/questions/user/answered/"+n+"/"+t+"/"+r+"/"+i+"/"+s+"/"+u).then((function(e){return e}));case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,n){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)(o().mark((function e(n,t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting other users status..."),e.next=3,(0,a.Pd)(c.R+"/session/users/"+n+"/"+t).then((function(e){return e}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,n,t,r,i){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(o().mark((function e(n,t,r,i,s){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting other users answered..."),e.next=3,(0,a.Pd)(c.R+"/questions/answered/"+n+"/"+t+"/"+r+"/"+i+"/"+s).then((function(e){return e}));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},13739:function(e,n,t){t.d(n,{G:function(){return o},o:function(){return c}});var r=t(16871),i=t(72791),s=t(62130),o=function(){var e=(0,r.s0)();(0,i.useEffect)((function(){(0,s.ej)("session_id")||e("/landing")}),[])},c=function(){var e=(0,r.s0)();(0,i.useEffect)((function(){"true"!==(0,s.ej)("is_admin")&&e("/home")}),[])}},22046:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(70885),i=t(72791),s=t(27275),o=t(62130),c=t(78402),a=t(13739),u=t(78048),l=t(77813),d=t(24846),p=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256,16.042c-132.548,0-240,107.451-240,240s107.452,240,240,240,240-107.452,240-240S388.548,16.042,256,16.042ZM403.078,403.12A207.253,207.253,0,1,1,447.667,337,207.364,207.364,0,0,1,403.078,403.12Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='272.614 164.987 249.986 142.36 136.305 256.041 249.986 369.722 272.614 347.095 197.56 272.041 385 272.041 385 240.041 197.56 240.041 272.614 164.987' class='ci-primary'/>"],f=t(72767),h=t(80184),x=function(e){var n=e.title.split("|").map((function(e,n){return 0==n?(0,h.jsx)("p",{style:{fontSize:"small",fontWeight:"bold"},children:e},n):1==n?(0,h.jsx)("p",{style:{fontSize:"large",fontStyle:"italic"},children:e},n):void 0}));return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"questions-center",children:[(0,h.jsx)("div",{style:e.loader?{display:"none"}:{display:"block"},className:"questions-card",children:(0,h.jsx)(l.b7,{md:12,children:(0,h.jsxs)(l.xH,{md:12,children:[(0,h.jsxs)(l.bn,{children:[(0,h.jsxs)("strong",{children:["Question ",parseInt(e.index)+1," (",e.typeOfQuestion," choice)"]}),(0,h.jsx)("span",{className:"float-end",children:(0,h.jsxs)("strong",{children:[parseInt(e.index)+1,"/",e.total]})})]}),(0,h.jsxs)(l.sl,{children:[(0,h.jsx)("div",{style:{fontSize:"large"},children:n}),e.options.map((function(n,t){return"multiple"==e.typeOfQuestion?(0,h.jsx)("div",{children:(0,h.jsx)(l.u5,{className:"question-card",style:{cursor:"initial"},children:(0,h.jsx)(l.EC,{className:"question-checkbox",id:(t+1).toString(),value:n,label:n,onChange:e.handleSelect},n)})},t):(0,h.jsx)("div",{children:(0,h.jsx)(l.u5,{className:"question-card",style:{cursor:"initial"},children:(0,h.jsx)(l.EC,{className:"question-checkbox",id:(t+1).toString(),value:n,label:n,onChange:e.handleSelect,name:"flexRadioDefault",type:"radio"},n)})},t)}))]}),(0,h.jsxs)(l.Bt,{children:[(0,h.jsxs)(l.u5,{style:{width:"48%"},color:"primary",variant:"outline",disabled:e.previousQuestionFlag,onClick:e.previousQuestion,children:["Back ",(0,h.jsx)(d.Z,{icon:p})]}),(0,h.jsxs)(l.u5,{style:{width:"48%"},color:"success",variant:"outline",className:"float-end",onClick:e.submitAnswer,children:["Next ",(0,h.jsx)(d.Z,{icon:f.z})]})]})]})})}),(0,h.jsx)("div",{style:e.loader?{display:"block"}:{display:"none"},children:(0,h.jsx)(u.Q,{})})]})})},g=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M450.27,348.569,406.6,267.945V184c0-83.813-68.187-152-152-152s-152,68.187-152,152v83.945L58.928,348.568A24,24,0,0,0,80.031,384h86.935c-.238,2.636-.367,5.3-.367,8a88,88,0,0,0,176,0c0-2.7-.129-5.364-.367-8h86.935a24,24,0,0,0,21.1-35.431ZM310.6,392a56,56,0,1,1-111.419-8H310.018A56.14,56.14,0,0,1,310.6,392ZM93.462,352,134.6,276.055V184a120,120,0,0,1,240,0v92.055L415.736,352Z' class='ci-primary'/>"],m=function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(l.xH,{style:{backgroundColor:"rgba(0,0,0,0.8)",padding:"30px 18px"},children:[(0,h.jsx)("h1",{style:{color:"white"},children:"Thank you for participating in Family Moments Experience!"}),(0,h.jsx)("hr",{style:{height:"4px",background:"#9ef1e2"}}),(0,h.jsxs)("p",{style:{color:"white",padding:"0",marginBottom:"0"},children:["Pending: ",(0,h.jsxs)(l.C_,{color:"warning-gradient",children:["Phase ",e.pendingPhaseText]})]}),(0,h.jsx)("hr",{style:{height:"4px",background:"#9ef1e2"}}),(0,h.jsxs)("p",{style:{color:"white",padding:"0"},children:["You will receive a push notification when new questions are available ",(0,h.jsx)(d.Z,{icon:g})]})]})})},v=t(48317),j=t(79328),y=t(86155),w=t(14112);var S=function(){(0,a.G)();var e=(0,i.useState)(!0),n=(0,r.Z)(e,2),t=n[0],u=n[1],d=(0,i.useState)("N/A"),p=(0,r.Z)(d,2),f=p[0],g=p[1],S=(0,i.useState)("N/A"),b=(0,r.Z)(S,2),Z=b[0],k=b[1],C=(0,i.useState)("N/A"),N=(0,r.Z)(C,2),P=N[0],_=N[1],A=(0,i.useState)(!1),q=(0,r.Z)(A,2),M=q[0],Q=q[1],R=(0,i.useState)(!0),D=(0,r.Z)(R,2),F=D[0],G=D[1],O=(0,i.useState)(!1),E=(0,r.Z)(O,2),H=(E[0],E[1]),I="N/A",L="N/A",T="N/A",z="N/A",W=(0,i.useState)([]),B=(0,r.Z)(W,2),U=B[0],Y=B[1],J="Child"===(0,o.ej)("role")?"child":"parent",V=[],X=(0,i.useState)([]),$=(0,r.Z)(X,2),K=$[0],ee=$[1],ne=(0,i.useState)(0),te=(0,r.Z)(ne,2),re=te[0],ie=te[1],se=(0,i.useState)(""),oe=(0,r.Z)(se,2),ce=oe[0],ae=oe[1],ue=(0,i.useState)(""),le=(0,r.Z)(ue,2),de=le[0],pe=le[1],fe=(0,i.useState)([]),he=(0,r.Z)(fe,2),xe=he[0],ge=he[1],me=(0,i.useState)(0),ve=(0,r.Z)(me,2),je=ve[0],ye=ve[1];(0,o.ej)("index")||(0,o.d8)("index",0,1);var we=(0,i.useState)((0,o.ej)("index")),Se=(0,r.Z)(we,2),be=Se[0],Ze=Se[1],ke=(0,o.ej)("index"),Ce=(0,i.useState)(0),Ne=(0,r.Z)(Ce,2),Pe=Ne[0],_e=Ne[1],Ae=J,qe=(new Date).toISOString().slice(0,10),Me=new Date(qe);Me.setDate(Me.getDate()+1);var Qe=new Date(Me).toISOString().slice(0,10);(0,i.useEffect)((function(){(0,w.eG)(),(0,c.Rm)().then((function(){Re(),De()})),function(){var e;function n(){window.location.reload()}function t(){console.log("Idle timer started..."),clearTimeout(e),e=setTimeout(n,6e4)}window.onload=t,document.onmousemove=t,document.onkeypress=t,document.onkeyup=t,document.onkeydown=t,document.onclick=t}()}),[]);var Re=function(){I=(0,c.aJ)(),L=(0,c.Fg)(),T=(0,c.ly)(),z=(0,c.gr)(),_(T+" starts at "+z),"N/A"!==L&&Promise.resolve((0,s.RQ)((0,o.ej)("session_id"),(0,o.ej)("code"),L,qe,Qe,J)).then((function(e){e.count[0].count==e.q_count[0].count?(console.log("Current Phase Completed"),H(!0),Q(!1)):(console.log(e),(0,o.d8)("index",e.count[0].count,1),Ze((0,o.ej)("index")),ke=(0,o.ej)("index"),H(!1),Fe())})),g(L),k((0,c.C$)()),Q("N/A"!==L)},De=function(){var e=[];Promise.resolve((0,s.wm)((0,o.ej)("session_id"),(0,o.ej)("code"))).then((function(n){e=n||[];for(var t=0;t<e.length;t++)e[t].answered=!1;Promise.resolve((0,s.nW)((0,o.ej)("session_id"),(0,o.ej)("code"),I,qe,Qe)).then((function(t){n.map((function(n,r){t.map((function(t){n.code===t.code&&(e[r].answered=!0)}))})),Y(e),u(!1)})).catch((function(e){u(!1)}))})).catch((function(e){u(!1)}))},Fe=function(){Promise.resolve((0,v.Pd)(j.R+"/questions/"+Ae+"/"+L).then((function(e){e.questions&&0!==e.questions.length?(V=e.questions,ee(V),ie(V[be].id),ae(V[be].title),pe(V[be].response),ge(V[be].options),ye(V[be].correct_option),_e(e.count)):(ae("No available questions"),pe(""),Ze(""),_e("")),u(!1)})))},Ge=[];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{style:{display:t?"none":"block"},children:[(0,h.jsxs)("div",{style:{width:"100%",display:"N/A"===f?"none":"block"},children:[(0,h.jsxs)(l.C_,{color:"success-gradient",children:["Phase ",f," is running"]})," ",(0,h.jsxs)(l.C_,{color:"danger-gradient",children:["Deadline at ",Z]}),(0,h.jsx)("hr",{})]}),(0,h.jsx)("div",{style:{display:M?"block":"none"},children:(0,h.jsx)(x,{options:xe,loader:t,index:be,id:re,title:ce,typeOfQuestion:de,total:Pe,handleSelect:function(e){if(e.target.checked&&"multiple"==de)Ge.push(e.target.id);else if(e.target.checked&&"single"==de)(Ge=[]).push(e.target.id);else{var n=Ge.filter((function(n){return n!==e.target.id}));Ge=n}},previousQuestion:function(){ke=(0,o.ej)("index"),ke--,(0,o.d8)("index",ke,1),ke>=0&&(Ze(ke),ae(K[ke].title),pe(K[ke].response),ge(K[ke].options),ye(K[ke].correct_option),ie(K[ke].id)),0===ke&&G(!0)},previousQuestionFlag:F,submitAnswer:function(){if(G(!1),console.log(Ge),0===Ge.length)(0,y.b)("You must submit an answer!","warning");else{if((0,v.QZ)(j.R+"/answer/create",{id:(0,w.XF)(),selected:Ge,UserCode:(0,o.ej)("code"),QuestionId:re}),ke=(0,o.ej)("index"),ke++,(0,o.d8)("index",ke,1),1==je&&("2"==Ge&&"parent"==J&&(ke=(0,o.ej)("index"),ke=Pe,(0,o.d8)("index",ke,1)),"2"==Ge&&"child"==J)){ke=(0,o.ej)("index"),ke++,(0,o.d8)("index",ke,1);for(var e=K[ke].correct_option;"true"==e;)ke=(0,o.ej)("index"),ke++,(0,o.d8)("index",ke,1),e=K[ke].correct_option}ke<Pe?(Ze(ke),ae(K[ke].title),pe(K[ke].response),ge(K[ke].options),ye(K[ke].correct_option),ie(K[ke].id)):((0,y.b)("Completed!","success"),Q(!1),G(!0),H(!0),(0,o.d8)("index",0,1),ae(""),pe(""),ge([]),ye(0),Ze(0),_e(0))}}})}),(0,h.jsx)("div",{className:"home-card",style:{display:M?"none":"block"},children:(0,h.jsx)(m,{otherUsers:U,pendingPhaseText:P})})]})})}}}]);
//# sourceMappingURL=46.6a231462.chunk.js.map